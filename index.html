<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Lean Canvas Form</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font: 14px Inter, sans-serif;
background: #f7f7f7;
padding: 20px;
color: #333;
}

.container {
position: relative;
max-width: 1200px;
margin: 0 auto;
padding-top: 60px;
}

.canvas-content {
display: grid;
grid-template-columns: repeat(5, 1fr);
gap: 15px;
margin-bottom: 30px;
}

.logo-container {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 60px;
display: flex;
align-items: center;
justify-content: center;
margin-bottom: 20px;
}

#logoPreview {
max-height: 60px;
max-width: 200px;
object-fit: contain;
}

.input-group {
background: #fff;
padding: 15px;
border-radius: 8px;
box-shadow: 0 2px 4px rgba(0,0,0,.1);
border: 1px solid #e5e7eb;
}

.half-width {
grid-column: span 2;
}

.fifth-width {
grid-column: span 1;
}

.footer-group {
grid-column: span 3;
}

label {
display: block;
font-weight: 500;
margin-bottom: 8px;
color: #374151;
}

input[type=text], textarea {
width: 100%;
padding: 8px 12px;
border: 1px solid #d1d5db;
border-radius: 6px;
font: 14px Inter, sans-serif;
}

textarea {
height: 100px;
resize: vertical;
white-space: pre-wrap;
word-wrap: break-word;
}

.word-limit {
font-size: 12px;
color: #6b7280;
margin-top: 4px;
}

.subtitle {
font-size: 12px;
color: #666;
font-style: italic;
margin-top: 4px;
}

.features-section {
background: #f8fafc;
border-radius: 12px;
padding: 30px;
margin: 30px auto;
border: 1px solid #e5e7eb;
max-width: 1200px;
}

.features-header {
text-align: center;
margin-bottom: 30px;
}

.features-header h2 {
font: 600 24px Inter, sans-serif;
color: #1f2937;
margin-bottom: 10px;
}

.features-list {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
margin-bottom: 30px;
}

.feature-card {
background: #fff;
padding: 20px;
border-radius: 8px;
border: 1px solid #e5e7eb;
}

.feature-title {
font-weight: 600;
margin-bottom: 15px;
color: #1f2937;
}

.btn {
padding: 8px 16px;
background: #2563eb;
color: #fff;
border: none;
border-radius: 6px;
cursor: pointer;
transition: background-color 0.2s;
}

.btn:hover {
background: #1d4ed8;
}

@media (max-width: 768px) {
.canvas-content {
grid-template-columns: 1fr;
}
.half-width, .fifth-width, .footer-group {
grid-column: span 1;
}
.features-list {
grid-template-columns: 1fr;
}
}

@keyframes slideIn {
from { transform: translateY(100px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}

@keyframes fadeOut {
from { opacity: 1; }
to { opacity: 0; }
}
</style>
</head>
<body>
<form id="leanCanvasForm">
<div class="container" id="canvasContainer">
<div class="logo-container">
<img id="logoPreview" style="display: none;">
</div>

<div class="canvas-content">
<div class="input-group half-width">
<label>Name:</label>
<input type="text" id="name" placeholder="Enter your name">
</div>

<div class="input-group half-width">
<label>Business Name:</label>
<input type="text" id="businessName" placeholder="Enter your business name">
</div>

<div class="input-group fifth-width">
<label>Problem:</label>
<textarea id="problem" placeholder="List your customers top 3 problems"></textarea>
<div class="subtitle">List your customers top 3 problems</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Existing Alternatives:</label>
<textarea id="alternatives" placeholder="List how these problems are solved today"></textarea>
<div class="subtitle">List how these problems are solved today</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Solution:</label>
<textarea id="solution" placeholder="Outline possible solutions"></textarea>
<div class="subtitle">Outline possible solution for each problem</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Key Metrics:</label>
<textarea id="keyMetrics" placeholder="Key numbers to track"></textarea>
<div class="subtitle">List key numbers telling how your business is performing</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Unique Value Proposition:</label>
<textarea id="uniqueValue" placeholder="Your compelling message"></textarea>
<div class="subtitle">Single, clear & compelling message that turns a visitor into a prospect</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>High Level Concept:</label>
<textarea id="concept" placeholder="List your X for Y analogy"></textarea>
<div class="subtitle">List your X for Y analogy (e.g. YouTube = Flickr for videos)</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Unfair Advantage:</label>
<textarea id="unfairAdvantage" placeholder="What can't be easily copied?"></textarea>
<div class="subtitle">Something that can't be easily copied or bought</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Channels:</label>
<textarea id="channels" placeholder="Path to customers"></textarea>
<div class="subtitle">List your path to customers</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Customer Segments:</label>
<textarea id="customerSegments" placeholder="Target customers"></textarea>
<div class="subtitle">List your target customers and users</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group fifth-width">
<label>Early Adopters:</label>
<textarea id="earlyAdopters" placeholder="List characteristics of ideal customers"></textarea>
<div class="subtitle">List characteristics of your ideal customer</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group footer-group">
<label>Cost Structure:</label>
<textarea id="costStructure" placeholder="Fixed and variable costs"></textarea>
<div class="subtitle">List your fixed and variable costs</div>
<div class="word-limit">Max 100 words</div>
</div>

<div class="input-group footer-group">
<label>Revenue Streams:</label>
<textarea id="revenueStreams" placeholder="List your sources of revenue"></textarea>
<div class="subtitle">List your sources of revenue</div>
<div class="word-limit">Max 100 words</div>
</div>
</div>
</div>

<div class="features-section">
<div class="features-header">
<h2>Customize Your Canvas</h2>
<p>Add your branding, choose a theme, and export your work</p>
</div>
<div class="features-list">
<div class="feature-card">
<div class="feature-title">Add Your Logo</div>
<input type="file" accept="image/*" id="logoUpload">
</div>
<div class="feature-card">
<div class="feature-title">Theme Customization</div>
<select class="theme-selector" id="themeSelector" style="width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #d1d5db; border-radius: 6px;">
<option value="#FFFFFF">Light Theme</option>
<option value="#F0F9FF">Blue Theme</option>
<option value="#F0FDF4">Green Theme</option>
<option value="#FDF2F8">Pink Theme</option>
<option value="#40E0D0">Turquoise Theme</option>
</select>
<div style="display: flex; gap: 10px; align-items: center; margin-top: 10px;">
<input type="color" id="customColorInput" style="width:50px; height:30px" value="#FFFFFF">
<button onclick="applyCustomColor(event)" class="btn">Apply</button>
</div>
</div>
<div class="feature-card">
<div class="feature-title">Export Canvas</div>
<button onclick="exportAsPDF()" class="btn">Download PDF</button>
</div>
</div>
</div>
</form>

<script>
const $ = e => document.querySelector(e);

const init = _ => {
// Set up word count limits
document.querySelectorAll('textarea').forEach(t => t.addEventListener('input', e => {
const words = t.value.trim().split(/\s+/).filter(word => word.length > 0);
if (words.length > 100) {
t.value = words.slice(0, 100).join(' ');
}
}));

// Initialize features
setupFeatures();
restoreTheme();
const themeSelector = $('#themeSelector');
if (themeSelector) {
themeSelector.addEventListener('change', e => applyTheme(e.target.value));
}
};

const setupFeatures = _ => {
const upload = $('#logoUpload'), preview = $('#logoPreview');

if (upload && preview) {
upload.addEventListener('change', e => {
const f = e.target.files[0];
if (f) {
const r = new FileReader();
r.onload = e => {
preview.src = e.target.result;
preview.style.display = 'block';
localStorage.setItem('logoData', e.target.result);
};
r.readAsDataURL(f);
}
});

// Restore saved logo if exists
const savedLogo = localStorage.getItem('logoData');
if (savedLogo) {
preview.src = savedLogo;
preview.style.display = 'block';
}
}
};

const applyTheme = c => {
document.querySelectorAll('.input-group').forEach(g => g.style.backgroundColor = c);
localStorage.setItem('themeColor', c);
};

const exportAsPDF = () => {
// Check if jsPDF is loaded
if (typeof window.jspdf === 'undefined') {
const script = document.createElement('script');
script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';
script.onload = createPDF;
document.head.appendChild(script);
} else {
createPDF();
}

function createPDF() {
const { jsPDF } = window.jspdf;
const doc = new jsPDF('p', 'pt', 'a4');
const margin = 40;
let y = margin;

// Add title and logo if available
doc.setFontSize(18);
doc.setFont('helvetica', 'bold');

const logoPreview = $('#logoPreview');
if (logoPreview && logoPreview.style.display !== 'none') {
try {
doc.addImage(logoPreview.src, 'JPEG', margin, y, 120, 40, undefined, 'FAST');
doc.text("Lean Canvas", margin + 140, y + 20);
} catch (e) {
console.error("Failed to add logo:", e);
doc.text("Lean Canvas", margin, y + 20);
}
} else {
doc.text("Lean Canvas", margin, y + 20);
}

y += 60;

// Add basic info
const name = $('#name').value;
const businessName = $('#businessName').value;

doc.setFontSize(12);
if (name) {
doc.setFont('helvetica', 'bold');
doc.text("Name:", margin, y);
doc.setFont('helvetica', 'normal');
doc.text(name, margin + 60, y);
y += 20;
}

if (businessName) {
doc.setFont('helvetica', 'bold');
doc.text("Business Name:", margin, y);
doc.setFont('helvetica', 'normal');
doc.text(businessName, margin + 110, y);
y += 30;
}

// Add a horizontal line
doc.setDrawColor(200, 200, 200);
doc.line(margin, y, doc.internal.pageSize.width - margin, y);
y += 20;

// Process all textareas
const sections = [
{ label: 'Problem', id: 'problem', subtitle: 'List your customers top 3 problems' },
{ label: 'Existing Alternatives', id: 'alternatives', subtitle: 'List how these problems are solved today' },
{ label: 'Solution', id: 'solution', subtitle: 'Outline possible solution for each problem' },
{ label: 'Key Metrics', id: 'keyMetrics', subtitle: 'List key numbers telling how your business is performing' },
{ label: 'Unique Value Proposition', id: 'uniqueValue', subtitle: 'Single, clear & compelling message that turns a visitor into a prospect' },
{ label: 'High Level Concept', id: 'concept', subtitle: 'List your X for Y analogy (e.g. YouTube = Flickr for videos)' },
{ label: 'Unfair Advantage', id: 'unfairAdvantage', subtitle: 'Something that can\'t be easily copied or bought' },
{ label: 'Channels', id: 'channels', subtitle: 'List your path to customers' },
{ label: 'Customer Segments', id: 'customerSegments', subtitle: 'List your target customers and users' },
{ label: 'Early Adopters', id: 'earlyAdopters', subtitle: 'List characteristics of your ideal customer' },
{ label: 'Cost Structure', id: 'costStructure', subtitle: 'List your fixed and variable costs' },
{ label: 'Revenue Streams', id: 'revenueStreams', subtitle: 'List your sources of revenue' }
];

sections.forEach(section => {
const element = $(`#${section.id}`);
if (element && element.value.trim()) {
// Check if we need a new page
if (y > doc.internal.pageSize.height - (margin + 100)) {
doc.addPage();
y = margin;
}

// Add section heading
doc.setFontSize(14);
doc.setFont('helvetica', 'bold');
doc.text(section.label, margin, y);
y += 20;

// Add subtitle
doc.setFontSize(10);
doc.setFont('helvetica', 'italic');
doc.setTextColor(100, 100, 100);
doc.text(section.subtitle, margin, y);
doc.setTextColor(0, 0, 0);
y += 20;

// Add section content with wrapping
doc.setFont('helvetica', 'normal');
doc.setFontSize(11);

const textLines = doc.splitTextToSize(element.value, doc.internal.pageSize.width - (margin * 2));
doc.text(textLines, margin, y);
y += (textLines.length * 15) + 25;
}
});

// Add footer
const pageCount = doc.internal.getNumberOfPages();
for (let i = 1; i <= pageCount; i++) {
doc.setPage(i);
doc.setFontSize(10);
doc.setTextColor(150, 150, 150);
doc.text('Lean Canvas - Page ' + i + ' of ' + pageCount, margin, doc.internal.pageSize.height - 20);
}

// Save the PDF
doc.save('lean-canvas.pdf');

// Show the CTA after PDF download
showExpertReviewCTA();
}
};

// Function to show the CTA
function showExpertReviewCTA() {
// Check if CTA already exists to avoid duplicates
if (document.getElementById('expertReviewCTA')) {
return;
}

// Create the CTA element
const ctaElement = document.createElement('div');
ctaElement.id = 'expertReviewCTA';
ctaElement.style.cssText = `
position: fixed;
bottom: 30px;
right: 30px;
background-color: #6366F1;
color: white;
padding: 20px;
border-radius: 8px;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
max-width: 320px;
z-index: 1000;
animation: slideIn 0.5s ease-out;
`;

// Add the content
ctaElement.innerHTML = `
<div style="display: flex; align-items: start;">
<div>
<h3 style="margin: 0 0 10px 0; font-size: 16px; font-weight: 600;">Want to improve your business model?</h3>
<p style="margin: 0 0 15px 0; font-size: 14px;">Get expert feedback on your Lean Canvas from a startup coach. Identify gaps and improve your business model.</p>
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-weight: bold; font-size: 15px;">Starting at $49!</span>
<button id="expertReviewBtn" style="display: inline-block; background-color: white; color: #6366F1; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-weight: 500; font-size: 14px; border: none; cursor: pointer;">Get Expert Review</button>
</div>
</div>
<button onclick="this.parentNode.parentNode.remove()" style="background: none; border: none; color: white; margin-left: 10px; cursor: pointer; font-size: 16px;">×</button>
</div>
`;

// Append to body
document.body.appendChild(ctaElement);

// Add event listener for the button with smooth scrolling
document.getElementById('expertReviewBtn').addEventListener('click', function(e) {
e.preventDefault();

// Find the expert services section
const expertSection = document.getElementById('expertservices');
if (expertSection) {
// Smooth scroll to the section
expertSection.scrollIntoView({ behavior: 'smooth' });

// Highlight the section briefly (optional)
expertSection.style.transition = 'background-color 0.5s';
expertSection.style.backgroundColor = 'rgba(99, 102, 241, 0.1)';
setTimeout(() => {
expertSection.style.backgroundColor = '';
}, 1500);
}

// Remove the CTA after clicking
document.getElementById('expertReviewCTA').remove();
});

// Auto-remove after 15 seconds
setTimeout(() => {
const cta = document.getElementById('expertReviewCTA');
if (cta) {
cta.style.animation = 'fadeOut 0.5s ease-in forwards';
setTimeout(() => cta.remove(), 500);
}
}, 15000);
}

const applyCustomColor = e => {
if (!e) return;
e.preventDefault();
applyTheme($('#customColorInput').value);
};

const restoreTheme = _ => {
const c = localStorage.getItem('themeColor') || '#FFFFFF';
applyTheme(c);
const i = $('#customColorInput');
if (i) i.value = c;
};

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
